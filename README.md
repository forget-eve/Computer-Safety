# 课前须知

> 课程主页：[瀚海教学网](https://course.ustc.edu.cn/portal)

- 成绩组成
  > - [x] 期末考试（闭卷，预计第14周左右）
  > - [x] 平时作业（每周交一次，约10次）
  > - [x] 课堂表现

- 各部分所占百分比
  > 根据实际情况综合考虑

# 第一章 绪论

## 计算机及其安全性

### 计算机的概念（略）

$$\text{计算机} \begin{cases}
\text{控制器、运算器} \begin{cases}
\text{A 人工智能(智能)} \newline
\text{B 区块链(信任)} \newline
\text{C 云计算(计算)} \newline
\end{cases} \newline
\text{存储器：D 大数据} \newline
\text{控制器、运算器} \begin{cases}
\text{E 物联网(连接)} \newline
\text{F 信息流(流动)} \newline
\text{G 移动通信(移动)} \newline
\end{cases} \newline
\text{(Q 量子)} \newline
\end{cases}
$$

### 信息安全

#### 信息安全的概念
- [x] 信息安全学关注信息本身的安全
  > - 不丢、不坏、不冒、不泄
  > - 不管是否应用了计算机作为信息处理的手段

- [x] 信息安全的任务是保护信息财产
  > - 防止偶然的或未授权者对信息的恶意泄露、修改和破坏，从而导致信息的不可靠或无法处理等
  > - 最大限度利用信息为我们服务，同时不招致损失或损失最小

- [x] 信息就是数据

$$信息安全 = 数据安全 + 系统安全$$

#### 信息安全的属性(CIA三要素)

- [x] 从 _**消息/数据**_ 的层次来看，包括
  > - _**保密性(Confidentiality，又叫机密性)**_ ，即保证消息不会被非法泄露扩散
  > - _**完整性(Integrity)**_ ，即保证消息的来源、去向、内容真实无误

- [x] 从 _**系统**_ 的层次来看，包括
  > - _**可用性(Availability)**_ ，即保证信息系统随时可用，运行过程中不出现故障，若遇意外打击能够尽量减少并尽早恢复正常

#### 信息安全威胁

<p align="center">
  <img src="./img/信息安全威胁.png" alt="信息安全威胁">
  <p align="center">
   <span>信息安全威胁</span>
  </p>
</p>

#### 信息安全的实现

> 一个完整的信息安全系统至少包含三类措施： _**技术方面的安全措施，管理方面的安全措施和相应的政策法律**_

<p align="center">
  <img src="./img/信息网络安全保护系统构架.png" alt="信息网络安全保护系统构架">
  <p align="center">
   <span>信息网络安全保护系统构架</span>
  </p>
</p>

#### 信息安全技术

- [ ] 信息加密
- [ ] 数字签名
- [ ] 数据完整性
- [ ] 身份鉴别
- [ ] 访问控制
- [ ] 安全数据库
- [ ] 网络控制技术
- [ ] 反病毒技术
- [ ] 安全审计
- [ ] 业务填充
- [ ] 路由控制机制
- [ ] 公证机制

#### 信息安全管理

> 信息安全管理主要涉及以下几个方面：人事管理；设备管理；场地管理；存储媒体管理；软件管理；网络管理；密码和密钥管理

#### 信息安全与法律

- [x] 政策上：完备的法律法规和安全标准
- [x] 技术上：计算机网络和信息安全的体系结构

##### 网络安全相关法律法规制度

- [x] 法律体系
  > - **网络安全法**
  > - 国家安全法
  > - **保密法**
  > - 反恐怖主义法
  > - **刑法**
  > - **密码法**
  > - 治安管理处罚法
  > - **数据安全法**
  > - **个人信息保护法**
  > - **反电信网络诈骗法**
  > - 关于加强网络信息保护的决定
  > - 关于维护互联网安全的决定
  > - 互联网信息服务管理办法

- [x] 配套法规
  > - 网络安全 _**等级保护制度**_
  > - 关键信息基础设施的认定和保护办法
  > - 数据跨境传输的安全评估办法
  > - 网络产品和服务的国家安全审查制度

##### 《网络安全法》配套行政法规、部门规章和规范性文件

1. 《儿童个人信息网络保护规定》
2. 《互联网新闻信息服务管理规定》
3. 《区块链信息服务管理规定》
4. 《网络信息内容生态治理规定》
5. 《互联网信息内容管理行政执法程序规定》
6. 《公安机关互联网安全监督检查规定》
7. 《网络产品和服务安全审查办法》(试行)
8. 《互联网跟帖评论服务管理规定》
9. 《互联网论坛社区服务管理规定》
10. 《互联网用户公众账号信息服务管理规定》
11. 《互联网群组信息服务管理规定》
12. 《互联网新闻信息服务新技术新应用安全评估管理规定》
13. 《互联网新闻信息服务单位内容管理从业人员管理办法》
14. 《微博客信息服务管理规定》
15. 《金融信息服务管理规定》
16. 《一流网络安学院建设示范项目管理办法》
17. 《工业控制系统信息安全防护能力评估工作管理办法》
18. 《国家健康医疗大数据标准、安全和服务管理办法(试行)》
19. 《网络安全等级保护测评机构管理办法》
20. 《公安部关于印发《违反<网络安全法>行为名称及适用条款》的通知》
21. 《具有舆论属性或社会动员能力的互联网信息服务安全评估规定》
22. 《网络音视频信息服务管理规定》
23. 《关键信息基础设施安全保护条例（征求意见稿）》
24. 《数据安全管理办法（征求意见稿）》
25. 《网络安全审查办法（征求意见稿）》
26. 《个人信息出境安全评估办法（征求意见稿）》
27. 《网络安全威胁信息发布管理办法（征求意见稿）》
28. 《网络安全等级保护条例（征求意见稿）》
29. 《网络安全漏洞管理规定（征求意见稿）》

## 系统安全的学科领域

### 信息安全内涵演变

$$\text{COMSEC(通信安全)} \rightarrow \text{COMPUSEC(计算机安全)} \rightarrow \text{INFOSEC(信息系统安全)} \rightarrow \text{IA(信息安全保障)} \rightarrow \text{CS/IA(网络空间安全/信息安全保障)}$$

### 网络空间安全学科知识体系的架构

- [x] CSEC2017以计算学科为基础，把网络空间安全学科知识体系划分为八大知识领域

$$\text{网络空间安全学科知识体系} \begin{cases}
\text{人员安全} \newline
\text{社会安全} \newline
\text{组织安全} \newline
\text{系统安全} \newline
\text{连接安全} \newline
\text{软件安全} \newline
\text{数据安全} \newline
\text{组件安全} \newline
\end{cases}
$$

## 系统安全的方法论

### 系统安全的两层含义

- [x] 以 _**系统思维**_ 应对安全问题
- [x] 应对 _**系统所面临**_ 的安全问题

### 系统的描述性定义

- [x] 一个 **系统（System** 是由 **相互作用或相互依赖** 的 **元素或成份** 构成的某种类型的一个 **统一整体** ，其中的元素完整地关联在一起，它们之间的这种关联关系有别于它们与系统外其它元素之间可能存在的关系
  > - 位于 **系统边界内部** 的元素属于系统的 _**组成元素**_
  > - 位于 **系统边界外部** 的元素属于系统的 _**环境**_

### 观察系统的方法

- [x] 自外观察法：
  > - 观察者位于系统之外对系统进行观察
  > > 通常是通过观察系统的输入和输出来分析系统的行为

- [x] 自内观察法：
  > - 观察者位于系统之内对系统进行观察，此时，观察者属于系统的一个组成部分
  > > 通常是通过观察系统的外部环境来分析系统的行为

### 在网络空间中观察系统的环境

- [x] 系统在风险的包围之中，必须具有一定的安全性，才能正常运转
  > 系统的安全性需要以系统化的视野去观察

### 系统研究的方法(重点)

#### 还原法

##### 定义

- [x] 把 _大**系统分解为小系统**_ ，然后通过对小系统的研究去推知大系统的行为(理解为分解法即可)
  > - 把系统分解成它的组成部分，通过对系统的组成部分的研究去了解原有系统的情况

##### 还原论应用示例

- [x] 机械手表的还原：
  > 很多机械零部件

- [x] 人的还原：
  > 头、颈、躯干、四肢

##### 还原中遇到的问题

$$\text{盐 = 氯化钠 = 氯元素 + 钠元素}$$

$$\text{氯元素} \rightarrow \text{剧毒}$$

$$\text{钠元素} \rightarrow \text{剧毒}$$

$$\text{盐} \rightarrow \text{剧毒(????)}$$

> **说明还原法中由小系统推导大系统性质不一定正确**

##### 还原中的困惑

- [x] 人的还原方法1：头、颈、躯干、四肢
- [x] 人的还原方法2：皮肤、肌肉、骨骼、内脏、血液循环系统、神经系统
- [x] 问题：爱因斯坦的成就 = ？

> **对于同一个系统存在多个还原方法，同时对于有些系统的还原方法不能确定**

#### 整体法

##### 定义

- [x] 把一个系统看成一个完整的统一体，一个完整的被观察单位，而不是简单的微观组成元素的集合

### 系统的宏观特性

- [x] 整体特性：综合特性、涌现性
  > - [ ] 综合特性：可以分解为系统组成部分的特性(理解为系统的特性可以由组成部分特性传递而来或者系统的特性可以被其组成部分继承得到，即该特性被系统和其组成部分共同所拥有)
  > > 例：盐的重量
  > - [ ] 涌现性：不可还原（即不可分解）为系统组成部分的特性(理解为系统的特性 **不** 可以由组成部分特性传递而来或者系统的特性 **不** 可以被其组成部分继承得到，即该特性 **不** 被系统和其组成部分共同所拥有)
  > > 例：盐的毒性

#### 安全性属于涌现性

- [x] 以操作系统和保密性为例：
  > - [ ] 操作系统的分解：进程管理、内存管理、外设管理、文件管理、处理器管理
  > - [ ] 分析：
  > > - 就算各个子系统都能确保不泄露信息
  > > - 某些子系统的相互作用也可能泄露信息

### 生命周期（Life Cycle）

- [x] 人(自然系统)的一生：
  > 出生、成长、成熟、衰老、死亡

- [x] 计算机(人工系统)的一生：
  > 系统需要、系统分析、系统建模与设计、系统构建与测试、系统使用与老化、系统报废

### 幸福与可信

 - [x] 人(自然系统)幸福与否：
  > 人生各个阶段是否平安顺利

- [x] 人工系统是否值得信赖（可信）：
  > 系统生命周期各阶段的使命的完成是否有保障

### 系统工程（Systems Engineering）

- [x] 系统工程：涵盖系统生命周期的具有关联 _**活动和任务**_ 的技术性和非技术性过程的集合
  > - _技术性过程_ 应用 `工程分析与设计原则` 去建设系统
  > - _非技术性过程_ 通过 `工程管理` 去保障系统建设工程项目的顺利实施

### 系统安全工程（Systems Security Engineering）

- [x] 系统安全工程：把安全性相关活动和任务融合到系统工程的过程之中，形成的一个系统工程专业分支
  > 它力求从系统生命周期的全过程去保障系统的安全性

### 系统安全思维

- [x] 运用整体论思想分析安全问题
- [x] 在系统的全生命周期中衡量系统的安全性
- [x] 通过系统安全工程措施建立和维护系统的安全性

## 安全问题与安全系统

- [x] 安全系统的建设应遵循从 `现实社会需求` 到 `计算技术需求` 的发展过程

```mermaid
graph LR
A[现实安全策略]-->B[安全策略]
B-->C[安全模型]
C-->D[安全机制]
D-->E[安全系统]
F[[现实环境：法律、风险、代价]]-->A
G[[现实目标]]-->A
H[[计算环境：功能、威胁、代价]]-->B
```

### 安全系统建设过程概括

1. 从分析现实安全问题开始
2. 结合现实环境和现实目标，制定现实安全策略
3. 加上计算环境因素，形成安全策略
4. 把安全策略表示成精确的安全模型
5. 根据安全模型设计出便于实现的安全机制
6. 实现安全机制，开发出安全系统

- [x] 计算环境中的概念
  > - 安全策略
  > - 安全模型
  > - 安全机制
  > - 安全系统

- [x] 现实中 `安全问题` 主要以 `安全攻击` 为主要体现

- [x] 在考虑解决办法时，需要考虑 `安全风险` 、 `应对代价` 、 `现有法律` 等因素，它们反映着现实的状况和可利用的条件，这就是 `现实环境`

- [x] 如何采取措施应对安全问题，在很大程度尚取决于受到安全威胁影响的对象，即现实中的社会组织或个人，取决于他们 `期望达到的效果和程度` 或他们追求的安全目标，即 `现实目标`

- [x] 针对现实安全问题，把现实环境和现实目标有机地结合起来，可设计出解决这些问题的办法，这就是 `现实安全策略`

- [x] 在网络空间的系统安全领域，通常说到 `安全策略` ，一般是指计算机安全策略，是信息技术环境中的安全策略，或者说是 `计算环境` 中的安全策略
`  > 现实安全策略是制定安全策略的基础，但往往还 `缺乏信息系统的元素` 

- [x] 在计算环境中，摆在第一位的是丰富、好用的功能，而不是安全性。安全性的实现有时还要以牺牲一定的易用性为代价

- [x] 所以，要 `以现实安全策略为基础` ，权衡 `计算环境` 中的 `功能` 、 `威胁` 、 `代价` 等因素，引入计算环境的特点，制定 `安全策略`

- [x] 为了提高严谨性和科学性，需要把安全策略精确地表示出来。安全策略的 `精确表示` ，或者说形式化表示，称为 `安全模型`

- [x] 为使理论色彩比较浓厚的安全模型的作用能落实到实处，需要为它设计出 `便于在信息系统中实现的形式` ，这种形式称为 `安全机制`

- [x] 必须在网络空间的系统中 `实现一定的安全机制` ，网络空间的系统才有可能称为 `安全系统`

### 讲台上的电脑的安全

- [ ] 物理安全：门卫、门锁、防盗窗等
- [ ] 硬件安全：防火、防水、防尘、防震、
- [ ] 防化学腐蚀；电压稳定；电磁防护等
- [ ] 系统安全：操作系统安全、数据库系统安全等
- [ ] 应用安全：应用软件(C/S→B/S)、OA/MIS/ERP等
- [ ] 网络安全：网络入侵、拒绝服务攻击等
- [ ] 数据安全：防勒索、隐私泄露等
- [ ] 安全管理：制度、机构、人员、建设、运维等

$$三分技术，七分管理$$

$$整体论、安全、代价$$

## 安全管理

- [x] 安全性：人为的故障
  > - 一个人做了不应该做的事情而产生的结果
  > - 安全是一个人为的问题，因此不能仅仅依靠技术来解决，需要借助安全管理和法律法规

- [x] 可靠性(reliability)：意外的故障

- [x] 可用性(usability)：操作错误

- [x] 三分技术，七分管理

### Safety vs. Security

- [x] Safety侧重于对无意造成的事故或事件进行安全保护，可以是加强人员培训、规范操作流程、完善设计等方面的安全防护工作

- [x] Security侧重于对人为地有意地破坏进行保障和保护，如部署安全设备进行防护、加强安全检测等

- [x] 随着信息系统安全向网络空间安全的发展，我们既要考虑人为的故意的针对计算机信息系统的渗透和破坏，也要考虑计算机信息系统的开发人员或使用人员无意的错误

- [x] 因此，本课程不对Security和Safety进行严格区分

### 运用技术提升管理水平

- [ ] 运用数据挖掘技术帮助发现漏洞

- [ ] 运用数据分析技术感知安全态势

- [ ] 运用机器学习技术帮助进行自动防御

### 安全标准

- [x] BS7799/ISO17799：安全管理标准
  > 主要内容有资产分类与控制、物理安全、个人安全、访问控制等

- [x] GB17895-1999《计算机信息系统安全保护等级划分准则》
  > 将信息系统安全分为5个等级：用户自主保护级、系统审计保护级、安全标记保护级、结构化保护级、访问验证保护级

- [x] TCSEC（桔皮书）：为计算机安全产品的评测提供了测试和方法
  > 将安全分为4个方面（安全政策、可说明性、安全保障和文档）和7个安全级别（从低到高依次为D、C1、C2、B1、B2、B3和A级）

#### BS7799/ISO17799

1. 建立有组织的安全策略
2. 组织性安全基础设施
3. 资产分类和控制
4. 物理和环境安全
5. 个人安全
6. 交流和运作管理
7. 访问控制
8. 系统开发和维护
9. 商业持续规划
10. 规范性

### 风险评估
> GB/T 20984-2022 《信息安全技术信息安全风险评估方法》

#### 风险与威胁分析

- [x] `风险=资产×漏洞×威胁`
  > 评定资产价值、漏洞危险程度和威胁可能性之后进行风险计算

- [x] `资产` ：应当是被鉴定和评估过的
  > - IT系统中包括硬件、软件、数据和信息、名誉等
  > - 资产鉴定：等价货币值、重要性

- [x] `漏洞` ：系统的脆弱性，可被利用来破坏资产
  > - 漏洞扫描
  > - 可由他们造成的影响定级（危险级别）
  > - 攻击面：由系统中可到达的和可被利用的脆弱点构成

- [x] `威胁` ：利用漏洞去损坏资产的行为
  > - 可根据对资产造成的损坏对威胁进行分类
  > - 鉴别攻击来源，分析攻击执行的细节
  > - `攻击树` ：定量分析攻击
  > > 形象化、结构化的威胁分析方法
  >
  > - 威胁可根据其可能性来评定，要考虑已有安全措施

- [x] 安全措施：安全措施的实施通过降低资产脆弱性被利用难易程度，抵御外部威胁，以实现对资产的保护

#### 风险要素及其关系

<p align="center">
  <img src="./img/风险要素及其关系.png" alt="风险要素及其关系">
  <p align="center">
   <span>风险要素及其关系</span>
  </p>
</p>

#### 风险评估实施流程图

<p align="center">
  <img src="./img/风险评估实施流程图.png" alt="风险评估实施流程图">
  <p align="center">
   <span>风险评估实施流程图</span>
  </p>
</p>

#### 资产识别

<p align="center">
  <img src="./img/资产识别.png" alt="资产识别">
  <p align="center">
   <span>资产识别</span>
  </p>
</p>

### 攻击面(重点)

- [x] `攻击面` 由系统中可到达的和可被利用的 `脆弱点` 构成。例如：
  > - 对外开放的Web和其他服务器的端口、监听这些端口的代码
  > - 在防火墙内可用的服务
  > - 处理进入内部的数据、电子邮件、XML、办公文档和工业级定制数据交换格式的代码
  > - 界面、SQL和Web表单
  > - 对敏感信息有访问权限的员工，这些敏感数据可能会收到社会工程学的攻击

#### 攻击面分类

- [x] 网络攻击面
  > 企业网、广域网或者局域网中的脆弱点或漏洞，包括网络协议中的脆弱点
  > > 例如：利用这些弱点进行拒绝服务攻击、通信线路破坏和各种不同形式的入侵攻击

- [x] 软件攻击面
  > 应用程序、实用程序或操作系统代码中的漏洞，尤其是指Web服务器软件中的漏洞

- [x] 人为攻击面
  > 员工或外部人员，诸如 `社会工程学` 、人为错误和受信任的内部人员引起的脆弱点

#### 攻击面分析

- [x] `攻击面分析` **是评估系统威胁的规模和严重性有用的技术**

- [x] 对这些脆弱点进行系统的分析可使开发者和安全分析师能够指导哪些安全机制是必需的

- [x] 一旦攻击面被定义出来，设计人员就可能会找到减小攻击面的方法，从而能使敌手的入侵更加困难

- [x] 攻击面也可以为测试、增加安全性方法、修改服务和应用程序等分配优先级提供指导

### 社会工程学

- [x] **社会工程学（Social Engineering，又叫“社交工程学”）**
  > - 利用人的弱点如人的本能反应、好奇心、信任、贪便宜等，进行诸如欺骗、伤害等危害手段，获取自身利益
  > - 黑客米特尼克悔改后在《反欺骗的艺术》中所提出的

- [x] 电信诈骗、网络钓鱼。。。

- [x] “社会工程学是未来10年最大的安全风险，许多破坏力最大的行为是由于社会工程学而不是黑客或破坏行为造成的。

- [x] 在信息安全这个链条中，人的因素是最薄弱的一环节
- [x] 社会工程就是利用人的薄弱点，通过欺骗手段而入侵计算机系统的一种攻击方法
  > 组织可能采取了很周全的技术安全控制措施，例如：身份鉴别系统、防火墙、入侵检测、加密系统等，但由于员工无意当中通过电话或电子邮件泄露机密信息(如系统口令、IP地址)，或被非法人员欺骗而泄露了组织的机密信息，就可能对组织的信息安全造成严重损害
- [x] 社会工程学通常以 ***交谈、欺骗、假冒或口语*** 等方式，从合法用户中套取用户系统的秘密
  > - 熟练的社会工程师都擅长进行信息收集，很多表面上看起来一点用都没有的信息都会被这些人利用起来进行渗透
  > - 比如说一个电话号码、一个人的名字、或者工作的ID号码等

### 攻击树(重点)

#### 相关概念

- [x] `树根` ：一般类的攻击，攻击目标
- [x] `树节点` ：达成攻击所需的 `子目标`
- [x] `叶子节点` ：发起一个攻击的不同方式
- [x] 除了叶子节点外的每一个节点： `与节点(AND-node)` 或者 `或节点(OR-node)`
- [x] 边：赋权值，估算攻击的成本、发生的可能性、成功的可能性等

<p align="center">
  <img src="./img/获取用户口令的攻击树.png" alt="获取用户口令的攻击树">
  <p align="center">
   <span>获取用户口令的攻击树</span>
  </p>
</p>

#### 关于攻击树

- [x] `攻击树` 是一个分支型的、层次化的数据结构，表示了一系列潜在技术，这些技术可利用安全漏洞进行攻击
- [x] `作为攻击目标的安全事件` 是攻击树的 `根节点` ，攻击者可以迭代地、递增地达到这个目标的途径就是这棵树的分支和子节点
- [x] 每一个 `子节点` 都定义了一个 `子目标` ，每一个子目标都可能有一系列的进一步的子目标，等等
- [x] 从根节点沿着路径向外延伸的最终的节点，也就是 `叶子节点` ，代表了发起一个攻击的不同方式

<p align="center">
  <img src="./img/网银认证的攻击树.png" alt="网银认证的攻击树">
  <p align="center">
   <span>网银认证的攻击树</span>
  </p>
</p>

<p align="center">
  <img src="./img/网银认证攻击树解释.png" alt="网银认证攻击树解释">
  <p align="center">
   <span>网银认证攻击树解释</span>
  </p>
</p>

# 第二章 计算机安全基础

## 计算机安全的内涵

### 几个典型安全事件

- [x] 2017年，Wannycry勒索病毒

- [x] 2016年，Mirai僵尸网络

- [x] 2009年-2010年，Stuxnet震网蠕虫病毒

#### Wannacry的原理

- [x] 传播部分：
  > - 扫描网络，寻找SMB协议漏洞
  > - EternalBlue(永恒之蓝)代码打通进入目标系统的通道
  > - DoublePulsar(双脉冲星后门，NSA武器库)代码把Wannacry安装到目标系统中并启动它运行

- [x] 勒索部分：
  > - 对被感染计算机中的文件进行加密，锁住计算机的正常运行
  > - 显示勒索界面，提供赎金支付接口

##### 关于SMB协议漏洞

- [x] SMB（Server Message Block）是Windows文件打印共享服务协议
- [x] 2017年3月，微软的MS17-010安全公告说明了SMB协议漏洞，并发布了漏洞补丁
- [x] 系统日常维护中 `未及时打安全补丁` 给Wannacry攻击(5月爆发)留下了可乘之机

#### Mirai事件的原因

- [x] 提供DNS服务的Dyn公司受到了DDoS攻击
  > 域名解析示例： $\text{域名：www.ustc.edu.cn} \leftarrow \rightarrow \text{IP：202.141.180.1}$

- [x] 向Dyn发动攻击的是大量的网络摄像头和家庭路由器，即IoT设备
  > - IoT设备组成僵尸网络（botnet）
  > - 僵尸（botnet）在指挥控制服务器的统一指挥下向Dyn发动DDoS攻击

#### Mirai恶意软件原理

- [x] 抓壮丁————发展僵尸
  > - 扫描互联网，寻找那些运行Linux操作系统的IoT设备
  > - 尝试以 `IoT设备出厂默认账户` 进行 `Telnet登录`
  > - 把Mirai副本安装到IoT设备，将信息发给指挥控制服务器

- [x] 指挥僵尸作战
  > - 指挥控制服务器给僵尸IoT设备给命令，指示它们向Dyn发动攻击

- [x] Mirai设置了不受感染的IP地址范围
  > 美国邮政服务系统、国防部系统

#### Stuxnet设计技巧

- [x] 利用了 `4个严重的零日漏洞` ，侧面反映设计者漏洞资源实力雄厚
- [x] 利用了多种 `rootkit隐藏技术` ，侧面反映技术精湛
- [x] 用偷来的数字证书对它的驱动程序进行签名，侧面反应偷盗功夫了得
- [x] 对纳坦兹 `铀浓缩工厂SCADA参数了如指掌` ，侧面反映情报力量强大
- [x] 综合反映：Stuxnet的开发与实施是一项复杂的系统工程，非个人所能为之

### 用属性描述安全性（Security）

- [x] 经典属性：
  > - 保密性（Confidentiality）
  > - 完整性（Integrity）
  > - 可用性（Availability）

- [x] 经典要素：CIA

#### 保密性（Confidentiality）

- [x] 保密性是指防止保密信息泄露给非授权的实体的属性

- [x] 保密信息
  > - 涉及个人的保密信息有时称为隐私（Privacy）
  > - 涉及组织的保密信息有时则称为秘密（Secrecy），例如商业秘密、国家秘密等

- [x] **只有经授权的用户/系统可以访问受保护的数据（系统资源、系统服务）**

- [x] 然而，保证保密性是一件困难的任务
  > - `谁授权` ：DAC、MAC、RBAC等
  > - `被授权的客体` ：数据、资源等
  > - 对数据的授权，经 `授权的操作粒度` 如何确定
  > -` 授予的权限和访问的方式` ：执行的操作

> ***注：保密性不涉及可信，仅反映客体敏感级别***
> > 假消息，蜜罐

##### Stuxnet事件中的保密性

- [x] 保密信息：伊朗纳坦兹铀浓缩工厂生产系统的技术指标信息
  > - 系统的网络结构、软硬件构成、软件类型、设备型号等

- [x] 非授权实体：美国、以色列？

- [x] 保密性：
  > - 非授权实体 _破坏了_ 纳坦兹铀浓缩生产系统的 **保密性**
  > - 伊朗 _没有很好地实现_ 纳坦兹铀浓缩生产系统的 **保密性**

##### 实现系统保密性的机制

- [x] `访问控制` 机制：阻止未获授权的实体 **`获取`** 受保护的信息

- [x] `加密保护` 机制：阻止未获授权的实体 **`理解`** 受保护的信息

#### 完整性（Integrity）

- [x] 完整性分为 `数据完整性` 和 `系统完整性`
  > - `数据完整性` 指 `确保数据` （包括软件代码）只能按照授权的指定方式进行修改的属性
  > - `系统完整性` 指 `系统` 没有受到未经授权的操控进而能完好无损的执行预定功能的属性

- [x] 防止未经授权的信息修改

- [x] 完整性是外部一致性的同义词：存储在计算机系统中的数据应当 `正确地反映` 计算机 `系统外` 的某些事实
  > - 外部一致性 vs. 内部一致性

- [x] 完整性在不同上下文环境中有不同的意义
  > - `通信安全中的完整性` ：对因蓄意操作或随机的传输错误而引起的传输数据的修改、插入、删除或重放而进行的检测和纠正
  > - `系统完整性` （硬件资源，软件资源） 

- [x] **完整性通常是其它安全属性的先决条件**
  > - 三个方面：
  > > - 资源的经授权的操作、分离和保护
  > > - 出错检测
  > > - 校正
  > 
  > - **计算机安全主要关心防止对数据的恶意修改**

- [x] 完整性的支撑机制
  > - `预防` 机制：阻止非法修改数据或非法操控系统
  > - `检测` 机制：判断完整性是否受到破坏

##### 数据的非法修改
1. 在没有获得授权的情况下修改数据
2. 没有按照授权中指定的方式修改数据

##### Stuxnet事件对完整性的破坏

- [x] 破坏数据完整性
  > - `Windows操作系统、SCADA应用软件、PLC设备` 被非法植入了恶意软件
- [x] 破坏系统完整性
  > - PLC设备受到恶意操控，导致 `离心机转速异常并损坏`
  > - PLC设备与SCADA间的通信受到非法操控， `离心机状态无法正常显示` ，导致异常无法得到及时处理

#### 可用性（Availability)

- [x] 可用性是指确保系统及时工作并向授权用户提供所需服务的属性

- [x] 防止未经授权的 **信息或资源截留**

- [x] 在安全领域，要保证的是，恶意的攻击者不能阻止合法用户合法访问他们的系统。也就是说，防止 `拒绝服务攻击` （Denial of Service,也就是Dos）

- [x] `拒绝服务攻击` : **阻止对资源的授权访问或者延误时间关键性的操作**
  > - `泛洪攻击` (flooding attacks)

- [x] **可靠且及时访问数据或资源**
  > - 外部攻击：DoS、DDoS、DRDoS等
  > - 系统冗余，容错系统，容错协议
  > - 故障安全（失效保护）
  > - 可靠性保证

- [x] 在以前的大多计算机安全的成功集中在保密性和完整性上；完全实现可用性是安全的下一个伟大的挑战（特别是网络环境下）
  > - Survivability（可生存性，抗毁自愈，残存性）

##### Wannacry和Mirai事件破坏可用性

1. Wannacry对受感染机器上的文件进行了加密，是机器无法正常工作
2. Mirai对Dyn发动DDoS攻击，导致Dyn无法正常工作
3. Dyn可用性被破坏，导致多个知名网站无法正常工作

#### 可生存性（Survivability）

- [x] `可生存性` 是对传统安全观念的突破和创新，强调网络信息系统在遭受 `攻击、故障或意外事` 故的情况下，能够 `及时完成其主要任务` 的能力

- [x] 可生存性的中心思想是即使在入侵成功后，甚至系统的 `重要部分遭到损害或摧毁时` ，系统 `依然能够完成任务` ，并能 `及时修复` 被损坏的服务

#### 计算机安全的技术特性

- [x] 其他特性
  > - 可审计性/问责性
  > - 可控性
  > - 不可否认性
  > - 可靠性

$$
\text{80年代认识：信息保密} \\ \\ \\ 
\text{90年代认识} \begin{cases}
\text{信息保密} \newline
\text{信息完整} \newline
\text{信息和系统可用} \newline
\end{cases} \\ \\ \\ 
\text{90年代后期认识} \begin{cases}
\text{信息保密} \newline
\text{信息完整} \newline
\text{信息和系统可用} \newline
\text{信息和系统可控} \newline
\text{信息行为不可否认} \newline
\end{cases}
$$

##### 可审计性（问责性，Accountability）

- [x] `无法防止所有` 不正确的行为
  > - 授权行为可以导致安全违背：root
  > - 安全系统存在缺陷，使得攻击者可以找到绕过安全系统的控制的方法

- [x] `可审计性` `审计信息` 必须有选择地保存和保护，以便影响安全的行为可以被 `追溯` 到责任方
  > - `识别` 和 `认证` 用户，保存安全事件的审计记录
  > - `计算机取证` ：计算机领域和法学领域的一门交叉科学，被用来解决大量的计算机犯罪和事故，包括网络入侵、盗用知识产权和网络欺骗等

##### 不可否认性（Non-repudiation）

- [x] 可审计性的更强形式，能对发生的具体行为提供 `不可欺骗的证据`
  > 指在信息交互过程中，确信参与者的真实同一性，即所有参与者都不可能否认或抵赖曾经完成的操作和承诺

- [x] 数字签名

- [x] 通信安全中的不可否认服务
  > - `发送` 方不可否认
  > - `递送` 方不可否认
  > - `接收` 方不可否认

###### 3A：认证，授权，审计

- [x] 认证/鉴别/识别（Authentication）
  > - `验证` 一个被声称的身份的过程
  > - 身份识别与认证是实现 `访问控制` 和 `系统审计` 的 `前提条件`

- [x] 授权（Authorization）
  > - 控制 `主体` 如何访问 `客体` 的 `策略`

- [x] 审计（Auditing）
  > - 用于 `记录和跟踪` 与安全有关的 `事件` ，包括发生的事件和引起安全事件的 `主体`

###### 4A：认证，授权，审计，记账

- [x] 认证(Authentication)：可以根据用户应用的实际需要，为用户提供不同强度的认证方式，既可以保持原有的 `静态口令` 方式，又可以提供具有 `双因子认证` 方式的高强度认证（一次性口令、数字证书、动态口令），还能够集成现有其它如生物特征等新型的认证方式。不仅可以实现用户认证的 `统一管理` ，并且能够为用户提供统一的 `认证门户` ，实现企业信息资源访问的 `单点登录`

- [x] 授权(Authorization)：可以对用户的资源访问权限进行 `集中控制` 。既可以实现对B/S、C/S应用系统资源的访问权限控制，可以实现对数据库、主机及网络设备的操作的权限控制

- [x] 审计(Audit)：将用户所有的 `操作日志集中记录管理和分析` ，不仅可以对用户行为进行监控，并且可以通过集中的审计数据进行数据挖掘，以便于事后的安全事故责任的认定

- [x] 记账(Accounting)：为用户提供 `统一集中的帐号管理` ，支持管理的资源包括主流的操作系统、网络设备和应用系统；不仅能够实现被管理资源帐号的创建、删除及同步等帐号管理生命周期所包含的基本功能，而且可以通过平台进行帐号密码策略，密码强度、生存周期的设定

##### 可控性（Controllability）

- [x] 指对于 `信息安全风险的控制能力` ，即通过一系列措施，对信息系统安全风险进行事前识别、预测，并通过一定的手段来防范、化解风险，以减少遭受损失的可能性
  > - 对 `信息传播及内容` 具有控制能力的特性
  > - 对危害国家信息（包括利用加密的非法通信活动）的 `监视审计`
  > - 控制授权范围内的 `信息流向及行为` 方式
  > - 使用授权机制，控制 `信息传播范围、内容` ，必要时能恢复密钥，实现对网络资源及信息的可控性

### 计算机安全定义

- [x] **计算机安全** 研究如何 `预防和检测` 计算机系统用户的 `非授权行为`
  > - `正确授权` 和 `访问控制` 的概念对于本定义至关重要
  > - 正确授权假设存在一个 `安全策略` ，即一组声明 `什么行为` 是 `允许` 的和 `什么行为` 是 `禁止` 的规则
  > - `安全策略域` 即是由策略所控制的用户、数据客体、机器等实体组成的集合

- [x] 广义定义：与我们采取的用来处理某些不受欢迎的人的蓄意行为的措施有关的一切

- [x] 不存在单一的安全定义

#### 计算机安全的其他定义

- [x] 国际标准化组织(ISO)将“计算机安全”定义：“为数据处理系统建立和采取的 `技术和管理` 的安全保护，保护计算机 `硬件、软件、数据` 不因偶然和恶意的原因而遭到 `破坏、更改和泄露` 。”此概念偏重于 `静态信息保护`

- [x] 也有人将“计算机安全”定义为：“计算机的 `硬件、软件和数据` 受到保护，不因偶然和恶意的原因而遭到 `破坏、更改和泄露，系统连续正常运行` 。”该定义着重于 `动态意义描述`

### 信息保障（Information Assurance）

- [x] 信息保障技术框架（Information Assurance Technical Framework，IATF）
  > - 美国国家安全局1998年10月颁布，目前已经成为美国军方组织实施信息化作战的既定指导思想

- [x] 信息保障依赖人、技术、操作3个核心因素
  > - 管理（人）：是 `第一位要素` ，是安全管理主体，需要进行意识培养、培训、组织管理、 `技术管理` 和 `操作管理` 等
  > - 技术： `PDRR` （保护/检测/反应/恢复）
  > - 操作：将人和技术紧密结合，涉及 `风险管理、安全监控、安全审计、跟踪告警、入侵检测、响应恢复` 等

#### 信息保障的内涵

- [x] 通过确保信息和信息系统的 `可用性、完整性、可识别性、保密性和不可抵赖性` 来保护信息和信息系统的信息作战行动，包括综合利用保护、检测和反应能力以恢复系统

#### PDRR模型

- [x] 保护（Protect）指采用可能采取的手段来保障信息的保密性、完整性、可用性、可控性和不可否认性
  > `护城河、城墙等；身份认证、访问控制等`

- [x] 检测（Detect）指利用高技术提供的工具检查系统存在漏洞、脆弱性、攻击、恶意代码等
  > `卫兵巡逻、连锁铃等；入侵检测系统、主机监控系统等`

- [x] 反应（React）指对危及安全的事件、行为、过程及时做出响应处理，杜绝危害的进一步蔓延扩大，力求系统还能提供正常服务
  > `吊桥升起、护卫队出击等；断网、修改口令、关闭服务等`

- [x] 恢复（Restore）指一旦系统遭到破坏，尽快恢复系统功能，尽早提供正常的服务
  > `修缮毁坏、补充卫兵等；恢复数据`

- [x] 从安全事件出现的 `前、中、后` 进行安全保障，不是被动保护自己，而是 `主动防御攻击` ，强调系统 `抗风险能力、应急响应和容灾备份能力`

- [x] 有时简化为PDR，有时扩展为PPDRR

##### PDR模型

- [x] 计算机系统的保护措施，大致分类如下：
  > - 预防(Prevention)：采取措施防止资产遭受损害
  > - 检测(Detection)：采取措施检测出什么资产受损、怎么受损、谁造成的损害
  > - 反应(Reaction)：采取措施以便能够重新获得资产，或者使资产从损害中恢复

- [x] 在预防和检测之间并不总是存在折衷方案
  > - 实践证明，投入到“预防”中的财力和物力越多，那么为了确认预防有效，投入到“检测”中的财力和物力也要相应增多

##### PPDRR模型

- Policy：策略
- Protection：防护
- Detection：检测
- Response：响应
- Recovery：恢复

- [X] PDR、PDRR、PPDRR等模型的概念可能略有不同，但思想上大同小异

## 数据与信息

### 数据与信息

- [x] 计算机安全是关于对信息和资源的访问控制

- [x] **数据代表了信息，信息是数据的(主观)解释**
  > - 数据依照约定所选择的用来表现人们概念上和真实世界中某些方面的物理现象。 **数据的含意称为信息**

- [x] 数据流 vs. 信息流
  > - **数据流：物理** 意义上的数据传递
  > - **信息流：逻辑** 意义上的数据传递

- [x] 数据用来传输和存储信息，以及依照形式化规则处理数据之后获取新的信息
  > - `信息 = 数据 + 处理`
  > - `数据安全 ≠ 信息安全`

### 隐蔽信道（Covert Channel）
- [x] `隐蔽信道` （又叫 `隐信道` 、隐通道、隐蔽通道）
- [x] `隐蔽信道` 是一个 `不受安全机制控制的信息流` 。隐蔽信道采用 `特殊编码` ，是公开信道中的一种能够进行隐蔽通信的信道
- [x] `一个状态变量` ： `一次` 传递 `一个比特位` 信息
  > - `存储信道` ：如果一个进程直接或间接地写一个存储单元，另一个进程直接或间接地读该存储单元（存储单元的“属性”，而非内容）
  > - `定时信道` ：如果一个进程通过调节它对系统资源的使用，影响另外一个进程观察到的真实响应时间，实现一个进程向另一个进程传递信息

### 统计推理
- [x] 统计数据库的推理（inference）
  > - 对N个人统计查询，再对N+1个人统计查询，综合查询结果
  > - 即使没有对数据进行直接访问，仍然可以获得关于某个人记录的信息

## 计算机安全设计原则

### 计算机安全设计原则

- [x] 提出一些基本的计算机安全 `设计原则`
- [x] 计算机安全设计空间中的主要维度， ***横轴代表安全策略的重点，纵轴代表一种保护机制被实现的计算机系统层次***

<p align="center">
  <img src="./img/计算机安全设计原则.png" alt="计算机安全设计原则">
  <p align="center">
   <span>计算机安全设计原则</span>
  </p>
</p>

### 控制重点

- [x] 完整性必须服从一组既定的规则。规则涉及到：
  > - `数据` 项的格式和内容（内部一致性）
  > - 可能作用在一个数据项上的 `操作`
  > - 允许访问一个数据项的 `用户`

- [x] 第1个设计原则：在一个给定的应用中，一个计算机系统中的保护机制应该集中在 `数据` 、 `操作` 还是 `用户` 上？
  > - 在实施安全控制时，这个选择是一个 `基本的设计原则`
  > - 操作系统传统上集中在保护数据（资源）方面，而在现代应用中则更多地与控制用户的行为有关

### 人-机标尺

- [x] 计算机系统的简单的分层模型
  > - 用户运行 `应用程序` ，这些应用程序被定制成满足非常明确的应用需求
  > - 应用程序可以使用像 `数据库管理系统` （DBMS）或 `对象请求代理` （ORB, object reference broker）这样的通用软件包提供的 `服务`
  > - 这些软件包运行在 `操作系统` 之上，操作系统执行文件和内存管理，并控制对打印机和I/O设备等资源的访问
  > - 操作系统可能有一个协调对处理器和内存访问的 `内核`
  > - `硬件` ，即处理器和内存，物理上存储和处理计算机系统拥有的数据

<p align="center">
  <img src="./img/人机标尺.png" alt="人机标尺">
  <p align="center">
   <span>人机标尺</span>
  </p>
</p>

#### 第2个设计原则

- [x] 第2个设计原则：一个安全机制应该被放置在计算机系统的哪一个 `层次` 上？
  > - 研究已有的安全产品时，可观察到这个模型中从硬件到应用软件每一层上的安全机制
  > - 设计者的任务就是为每一个机制寻找合适的层次，以及为每一个层次寻找合适的机制

#### 保护机制切面模型

- [x] `新的设计策略` 将一个计算机系统的安全机制想象成一些同心的保护环，其中硬件机制位于中心，应用机制位于外围

- [x] `靠近中心的机制` 趋向于 `更通用、更面向计算机和更关心` 对 `数据` 的控制访问

- [x] `外围的机制` 则更适合解决个别的 `用户需求`

<p align="center">
  <img src="./img/保护机制切面模型.png" alt="保护机制切面模型">
  <p align="center">
   <span>保护机制切面模型</span>
  </p>
</p>

##### 人-机标尺

- [x] 结合前面的两个安全原则，可用人-机标尺来放置安全机制

<p align="center">
  <img src="./img/用于访问控制机制的人机标尺.png" alt="用于访问控制机制的人机标尺">
  <p align="center">
   <span>用于访问控制机制的人-机标尺</span>
  </p>
</p>

### 复杂性和保证性

- [x] 安全机制在人-机标尺上的位置常常与它的复杂性密切相关。标尺的右侧是简单的通用机制，而应用通常则要求富有特色的安全功能

- [x] 第3个设计原则：与 `富有` 特色的安全环境相比，你是否偏爱简单性和更高的保证？
  > - `简单通用机制` 无法满足特殊的保护需要
  > - `功能丰富` 的安全环境要求用户是安全专家

- [x] 复杂性和保证性有 `折衷`
  > - 富有特色的安全系统和高保证性很难匹配
  > - 高保证性要求系统化的设计实践（形式化方法）

### 计算机安全进退两难的困境

- [x] `功能丰富` 的安全环境要求用户是 `安全专家`

- [x] `不懂安全的用户` 有特殊的安全需求，却常常 `不具备安全的专门知识`

- [x] `安全评估` 检查产品是否提供了 `它所承诺的安全服务` 。因此，必须规定安全系统的功能，且确保安全控制是有效的，能够抵抗渗透的企图

- [x] 信息产品的安全性 VS. 信息系统的安全性

### 集中控制 or 分布控制

- [x] **在一个安全策略域内，应该执行相同的控制**
  > - 如果有一个唯一的中央实体负责安全，那么很容易获得 `一致性` ，但是这个中央实体可能成为 `性能瓶颈`
  > - 反过来，一个分散式的解决方案可能更有效，但必须格外小心，保证不同的成员执行一致的策略

- [x] 第4个设计原则：定义和实施安全的任务是应该交给一个 `中央` 实体，还是应该托付给系统中的 `各个成员` ？
  > - 这个问题出现在 `分布式系统安全` 中是很自然的，将会看到这两种方法的例子。但是，正像Bell-LaPadula模型中强制和自主的安全策略所论证的那样，这个问题在大型机系统的环境下也是很有意义的

## 下层

### 下层

- [x] 每个保护机制定义了一个 `安全周界（边界）` ，那些失效后也不会损害保护机制的系统部分位于周界的外部，那些可被用来使保护机制失效的系统部分位于周界的里面

- [x] 第5个设计原则：如何防止攻击者访问位于保护机制下面的层？
  > - 可以访问“下面层次”的攻击者处于一个能够摧毁保护机制的位置
  > > - 如果在操作系统中获得了系统特权，通常就能够改变那些包含有服务层和应用层安全机制控制数据的程序或文件
  > > - 操作系统的逻辑访问控制可以通过对物理存储设备的直接访问而绕过去

### 来自下层的对安全机制的攻击

- [x] 恢复工具
  > 像Norton Utilities、EasyRecovery等可通过直接读（物理）存储器来帮助恢复数据，进而恢复文件结构。这样的工具当然 **也可以用来绕过逻辑访问控制，因为它不关心逻辑存储结构**

- [x] Unix设备
  > Unix将I/O设备和物理内存（memory）作为文件来管理。如果访问许可定义得不好，比如将读访问授予一个包含读保护文件的磁盘，那么攻击者就可以读磁盘内容，然后重建文件
  > - `/dev/kmem` 字符设备文件，可以访问系统虚拟存储器
  > - `/dev/mem` 字符设备文件，可以访问系统物理存储器
 
- [x] 备份 
  > - 一个尽责的系统管理员会定期地进行备份。谁能够得到备份介质，谁就能够访问介质上的所有数据
  > - 逻辑访问控制在此毫无帮助，备份介质必须被安全地锁藏起来以保护数据

- [x] 内核转储
  > - 当系统崩溃时，它会创建一个其内部状态的内核转储，这样可便于确定崩溃的原因
  > - 如果内部状态包含敏感信息，如密钥，而内核转储存放在一个任何人都可以访问的文件中，那么一个警觉的攻击者可以毫无困难地破坏系统的安全
  > - 例如：Core File Weakness（Unix）。在程序运行遇到了不可恢复的错误时，系统创建 `core文件` ；core文件包含了通常用来调试程序的存储器映像；来自SUID程序的core文件可以包含加密的口令和其它敏感信息

- [x] 对象重用（释放存储器）
  > - 进程调度时的上下文切换，被挂起的进程以后要继续执行时所需的全部信息必须保存下来，而与新进程相关的信息必须建立起来
  > - 出于安全的考虑，必须避免存储残留，即在分配给新进程的内存区域中遗留数据
  > - 对策：净化处理

- [x] 缓冲区溢出
  > - 赋予一个变量的值相对于分配给这个值的存储缓冲而言太大，以致于分配给其他变量的存储位置被重写
  > - 修改了本来不能逻辑访问的变量

- [x] 下层：软件————硬件————物理安全

### 旁道攻击 side channel attack

- [x] 旁道攻击(又称旁路攻击、侧信道攻击、边信道攻击)：避开了复杂的密码算法，利用密码算法在软硬件实现中泄露出的各种信息进行攻击，就像攻城绕开正门，专打旁门一样

- [x] 旁道攻击不攻击密码本身，而是攻击那些实现于不安全系统（会在不经意间泄漏信息）上的加密系统

- [x] 在旁道攻击中可利用的信息有声音、时间、电磁辐射、能量消耗等

## 计算机安全防护原则

### 1.整体性原则

- [x] 从整体上构思和设计信息系统的整体安全框架，合理选择和布局信息安全的技术组件，使它们之间相互关联、相互补充，达到信息系统整体安全的目标。

- [x] “新木桶”理论

#### “新木桶”理论

- [x] **关注最短板** ：信息安全保护达到的安全级别取决于各种保护措施中 `最弱的一种` ，该保护措施和能力决定了整个信息系统的安全保护水平

- [x] **关注底** ：木桶的底要坚实，信息安全应该建立在牢固的安全理论、方法和技术的基础之上，才能确保安全。信息安全的底是 `密码技术、访问控制技术、安全操作系统、安全芯片技术和网络安全协议` 等，它们构成了信息安全的基础

- [x] **关注木板之间的协同** ：不同产品之间的有效协作和联动有如木板之间的桶箍。它能把一堆独立的木条联合起来，紧紧地排成一圈。同时它消除了木条之间的缝隙，使木条之间形成 `协作关系，达到一个共同的目标`

### 2.分层性原则

- [x] 对信息系统设置 `多个防护层次` ，这样一旦某一层安全措施出现单点失效，不会对系统的安全性产生严重影响

- [x] 同时，分层性安全防护不仅包括增加安全层次的数量，也包括 `在单一安全层次上采用多种不同的安全技术协同` 进行安全防护

<p align="center">
  <img src="./img/分层性原则.png" alt="分层性原则">
  <p align="center">
   <span>分层性原则</span>
  </p>
</p>

- [x] 针对需要保护的核心系统，部署层层的防护措施

- [x] 针对每一层具体不同的网络环境特殊性，所采取的安全手段又各有侧重

#### 等保：一个中心，三重防护

- [x] “一个中心”即安全管理中心，“三重防护”即安全计算环境、安全区域边界、安全通信网络

- [x] `安全管理中心` 是对网络安全等级保护对象的 `安全策略及安全计算环境、安全区域边界和安全通信网络` 上的安全机制实施统一管理的平台或区域，是网络安全等级保护对象安全防御体系的重要组成部分

### 3.最小授权原则/最小权限原则

- [x] 系统 **仅** 授予实体（用户、管理员、进程、应用和系统等）完成规定任务所必需的 **最小权限** ，并且该权限的 **持续时间也尽可能短**
  > - 一方面，赋予实体“必不可少”的特权，这就保证了所有的实体都能在所赋予的特权之下完成所需要完成的任务或操作
  > - 另一方面，它只赋予实体“必不可少”的特权，这就可使无意识的、不需要的、不正确的权限使用的可能性降到最低，从而确保系统安全

- [x] ***权限分割、互相制约、最小化原则***
  > - [ ] `系统超级用户或系统管理员` ，拥有对系统全部资源的存取和分配权，所以它的安全至关重要，如果不加以限制，有可能由于超级用户的恶意行为、口令泄密、偶然破坏等对系统造成不可估量的损失和破坏，因此有 `必要对系统超级用户的权限加以限制`
  > - [ ] `管理权限交叉` ，有 `几个管理用户来动态地控制系统的管理，实现互相制约`
  > - [ ] 而对于非管理用户，即普通用户，则实现权限最小原则，不允许其进行非授权以外的操作

### 4.简单性原则

- [x] 在使用安全技术和实施安全措施中，需要使安全过程尽量简洁，安全工具尽量易于使用且易于管理

- [x] 正面例子：可信计算基（Trusted Computing Base，TCB）的提出，就是使安全系统的设计尽量简单化和小型化，以利于对其进行安全性分析和查找安全漏洞

- [x] 反面例子：当前通用的PC操作系统为了获得较高的运行效率，都采用大内核结构，把设备驱动、文件系统等功能都纳入操作系统内核，导致系统安全边界过长、内核代码庞大，大大降低了系统的稳定性和安全保证等级

### 5.等级性原则

- [x] “等级性”，即， ***安全层次和安全级别***
  > - 良好的信息安全系统必然是分为不同级别的，如：
  > > - 对信息保密程度分级（绝密、机密、秘密、普密）
  > > - 对用户操作权限分级（面向个人及面向群组）
  > > - 对网络安全程度分级（安全子网和安全区域）
  > > - 对系统的重要性的分级（等级保护的一~五级）
  >
  > - 针对不同级别的安全对象，提供全面的、可选的安全算法和安全体制，以满足网络中不同级别各种实际需求
  > - 兼顾安全、成本和易用性

### 平衡之道：安全 vs. 易用 vs. 成本

- [x] 在可用性（Usability）和安全性（Security）之间是一种相反的关系

- [x] 提高了安全性，相应地就降低了易用性

- [x] 而要提高安全性，又势必增大成本

- [x] 管理者应达成一种可接受的平衡

# 第三章 身份识别与认证

## 身份认证的概念

### 身份认证的概念

- [x] `身份认证` 是指计算机及网络系统确认操作者身份的过程

- [x] 在数字世界中，一切 信息包括用户的 `身份信息` 都是用一组 `特定的数据` 表示的

- [x] **计算机只能识别用户的数字身份**

- [x] 所有 `对用户的授权` 也是针对 `用户数字身份` 的授权

### 身份认证的两个方面

- [x] 标识（Identification）是系统为区分用户身份而建立的 `用户标识符` ，一般是在用户 `注册到系统` 时建立，用户标识符 `必须是唯一的且不能伪造`

- [x] 鉴别（Authentication）将 `用户标识符与用户物理身份联系的过程` ，鉴别要求用户出示能够证明其身份的特殊信息，并且这个信息 `是秘密的或独一无二的` ，任何其他用户都不能拥有它

- [x] 身份认证是安全体系的第一道大门，是网络安全的基石，是名副其实的网络安全体系的“门禁”

### 身份认证在安全中的作用

<p align="center">
  <img src="./img/身份认证在安全中的作用.png" alt="身份认证在安全中的作用">
  <p align="center">
   <span>身份认证在安全中的作用</span>
  </p>
</p>

### 身份识别与认证

- [x] 安全系统有时必须检查请求服务的用户的身份， **认证就是验证用户身份的过程**
  > - 例如：张三其人 – 外部实体；用户id – 身份；用户进程 – 主体
  > - `外部实体` 必须提供信息，允许系统证实他的 `身份`
  > - 实体 `身份` 控制与其 `关联` 的主体可以进行的操作；因此一个主体必须绑定到外部实体的身份
  > - `认证过程` ***由从外部实体获取鉴别信息、分析数据和确定鉴别信息是否与被认证的实体相关联*** 。这样，计算机必须存储一些关于实体的信息

### 认证系统

- [x] `认证系统` （Authentication system）由五个部分组成：
  > - 鉴别信息的集合A 实体用来证明其身份的特定信息的集合。如Unix的明文口令的集合
  > - 辅助信息的集合C `系统存储` 并且用来证实鉴别信息的信息集合。如Unix的密文口令的集合
  > - 辅助函数的集合F 由鉴别信息产生辅助信息的函数的集合。即， $f \in F，f: A \rightarrow C$ 。如Unix的Hash函数的集合
  > - 鉴别函数的集合L 验证身份的函数的集合。即，对于 $l \in L，l: A×C \rightarrow \leftbrace true，false \rightbrace$
  > - 选择函数的集合S 允许实体创建或改变鉴别信息和辅助信息。如创建、修改口令，选择加密算法等

### 身份认证协议

- [x] 身份认证协议涉及一个证明者P和验证者V，P要让验证者V相信“他是P”。他们必须做到：
  > - P和V在诚实的情况下，P能让V成功的识别自己，即在协议完成时，V接受了P的身份
  > - V不能重新使用自己和P识别过程中的信息伪装成P,向 `第三者B` 证明自己是P(用密码学的角度思考即V不能获取P向自己通信时的密钥，利用该密钥对消息签名，向他人发送消息，伪装成P)
  > - 除P外的 `第三者C` 以P的身份执行该协议，能让V相信C是P的概率可以忽略不计(关键： `辅助函数F` 。例如Hash碰撞)

<p align="center">
  <img src="./img/身份认证协议.png" alt="身份认证协议">
  <p align="center">
   <span>身份认证协议</span>
  </p>
</p>

### 可供选择的身份认证方法

- [x] 从一般的观点看，可以选择基于以下信息进行身份认证：
  > - 你知道的事情
  > - 你拥有的东西
  > - 你是谁
  > - 你做什么
  > - 你在哪里

#### 你知道的事

- [x] 用户必须知道一些“秘密”才能被认证。例如，用户拥有的 `口令` (此处的口令和密码学的密钥要区分开)、个人身份识别号码（PIN）或者类似的令牌(tokens)、信用卡电话银行确认

- [x] 在这种认证模式中， ***关键是如何认证“秘密”而又不泄漏秘密***

- [x] 可能存在的问题
  > - 钓鱼攻击（问题：单向认证）
  > - 认证中心是否可信？（区块链：无中心）

#### 你拥有的东西

- [x] 用户必须出示一个被认证的 `物理令牌`
  > - 例如，能打开锁的钥匙，用于控制进入公司大门的卡片或身份标志（identity tag）
  > - 智能卡（smart cards）可能成为口令的替代物

- [x] 问题：物理令牌可能会 `遗失或被盗`

- [x] 增加安全性
  > - `物理令牌通常与所知道的事结合起来使用` ，如银行卡与PIN一起使用
  > - 物理令牌包含能够识别合法用户的信息，如一卡通上的 `照片`

- [x] 典型应用：USB key

#### 你是谁

- [x] 为了准确地认证每一个用户，可以使用生物测定技术
  > - 例如，带有照片的卡片（如身份证、护照等），更复杂的方法使用 `掌纹、指纹、虹膜图案或视网膜图案、人脸` 等来识别一个人
  > - 比较常见的是指纹，例如上班打卡、手机解锁等

- [x] ***生物测定技术或许能够为个人认证提供最终解决方案***
  > - 指纹+物理令牌(手机)：云闪付、华为pay、Apple Pay
  > - 问题：泄密、伪造

#### 你做什么

- [x] 人们往往以一种 `独特的和可重复` 的方式做一些机械性的工作

- [x] 手写签名
  > - 支票 ：提高生产力
  > - 问题 ：空头支票
  > - `伪造签名` 并不是那么困难，毕竟很多时候靠人眼去 `检查手写签名`
  > - 为了获得更高的安全性，用户可以在一个特殊的垫子上签名，垫子可以测量出像 `书写速度和书写力度这样的特征`

- [x] 键盘打字
  > - 在一个键盘上，打字速度以及击键之间的间隔被用来认证用户个人
  > - 如前所述，认证系统必须建立起来，使得假肯定和假否定减少到相关应用可以接受的程度

- [x] 手势密码、手势识别

#### 你在哪里

- [x] 在用户登录时，系统可能还要考虑用户在哪里
  > - 例如，限制用户从某个特定的终端注册时才允许访问，如 `系统管理员只能从操作员控制台注册` ；类似的，作为用户只允许他从他所在办公室的工作站上登录， `ip认证`
  > - 在移动和分布式计算中, 系统可以使用 `全球定位系统` 来确定确定用户登录的位置，也有助于解决过后关于用户真实身份的争端
  > - 单位发手机，24小时开机并携带，GPS定位
  > - 考勤打卡，带地理位置

#### 双因素认证（双因子认证）

- [x] 在网络世界中手段与真实世界中一致，为了达到更高的身份认证安全性，某些场景会将挑选2种混合使用，即所谓的 `双因素认证`
  > - 一卡通+口令
  > - 手机+指纹

#### 只认证“身份”，不认证“人”

- [x] 注：口令等身份认证 `并不能认证人` ： `成功的认证只意味着用户知道一个特定的秘密` 。 `没有办法区分合法用户` 和获得了该用户的口令等特征的 `入侵者` 

- [x] 身份的主题贯穿在人类经历中，计算机也不例外。在计算机科学， `身份是特权指派的基础，且在保护域意义上是完整的`

- [x] 身份的2个主要用途： `可审计性` 和 `访问控制`

## 基于口令的身份认证

### 概述 

#### 基于口令的身份认证

- [x] `口令` 又称个人识别码或通信短语，通过输入口令进行认证的方法便称为基于口令的认证方式

- [x] `口令认证是最常用的一种认证技术` 。目前各类计算资源主要靠 `固定口令` 的方式来保护

- [x] 大多数计算机系统使用 `基于用户名和口令的身份识别和认证技术` 作为它们的 `第一道防线`

- [x] 注意： `口令 ≠ 密码` (在密码学近似为密钥)

- [x] 由于口令的可记忆性和抗猜测性会相互抵触，会导致矛盾，但是口令认证不可代替，因为其成本低廉，且可用性适中，并有可再生性（被人获取后可以更换），而硬件token成本高，可用性低（但有可再生性），生物特征可用性高，但是无可再生性，且成本高。

- [x] 口令安全强度不高，是造成数据泄露的重要根源

#### 用户名与口令
- [x] 登录计算机时要求输入用户名和口令
  > - 输入用户名：身份 `识别` ，即声明你是谁
  > - 输入口令：身份 `认证` ，即证明你是所声称的那个人
- [x] `实体认证` **验证一个被声称的身份的过程**
- [x] 为了防止攻击者以注册用户身份使用计算机，可以不仅在会话开始时要求认证，也可以 `在会话期间定期要求认证` （重复认证）
  > - 可以选择锁住屏幕，或当某个用户空闲太久时自动关闭其会话
  > - 解决了 `TOCTTOU（time of check to time of use）问题`
  > > 操作系统在会话开始时检查用户身份，但是在后期会话过程中一直使用这个身份来进行访问控制决策

#### 口令认证机制的安全性

- [x] 作为认证机制的口令的实际安全性：
  > - 口令猜测 弱口令、生日、用户或家庭成员的信息
  > - 口令欺骗 通过假冒的登录程序或社会工程骗取口令
  > - 口令文件泄漏 脱机的字典攻击
  > - 遗忘口令 重新设置口令

- [x] 基于用户名/口令的身份验证机制 `不能防止窃听攻击`
  > - 口令明文传输+网络嗅探
  > - OpenSSL心脏滴血漏洞，读取内存信息
  > - 旁道攻击，如输入键盘上的灰尘分布、击键声音、温度分布等
  > - 键盘记录器（可信路径）

- [x] 口令强度计：Password strength meter(PSM)

<p align="center">
  <img src="./img/口令猜测攻击分类.png" alt="口令猜测攻击分类">
  <p align="center">
   <span>口令猜测攻击分类</span>
  </p>
</p>

> 在线猜测的两种策略 
> > - 经验丰富的在线攻击者：熟知目标网站口令分布，优先尝试 `最流行` 口令
> > - 普通在线攻击者：未知目标网站口令分布，普遍尝试 `常见流行` 口令

> 离线猜测的四种策略
> > - 暴力破解：遍历口令字符空间，尝试所有可能的口令
> > - 字典匹配：基于给定的字典和“修改规则”，生成口令猜测列表
> > - 概率猜测：利用概率模型（e.g,Makov）描述目标口令分布，并依概率降序实施口令猜测
> > - 组合方法

### 口令管理和选择

#### 选择口令

- [x] 口令选择是一个重要的安全问题
  > - 不能完全避免攻击者意外地猜测出有效的口令，但可以努力使这种事件的发生率尽可能的低

- [x] 攻击者基本上遵循以下两种猜测策略：
  > - 穷尽搜索(exhaustive search)又称蛮力攻击，在一定长度范围内，尝试有效符号所有可能的组合
  > > - 口令空间，口令字符集和口令长度
  > > - 计算速度，量子计算机等
  > > - 最大尝试次数、时间间隔等保护措施
  > 
  > - 智能搜索(intelligent search)在一个受限名字空间进行搜索
  > > - 尝试那些与用户有联系的口令，像名字、朋友和亲戚的名字、汽车商标、车牌号、电话号码、生日等
  > > - 尝试那些比较流行的口令。例如字典攻击，它尝试来自于一个在线字典的所有口令

#### 弱口令

- [x] 弱口令：容易被他人猜测到或能够被破解工具破解的口令

##### 弱口令举例

<p align="center">
  <img src="./img/弱口令举例.png" alt="弱口令举例">
  <p align="center">
   <span>弱口令举例</span>
  </p>
</p>

#### 针对口令的威胁

- [x] 字典攻击：攻击者预先定义好一个字符串集合构成字典，逐一尝试用户字典中的字符串以破解口令

- [x] 暴力破解

#### 不良的口令管理习惯

- ✓ 使用弱口令

- ✓ 长期不更改口令

- ✓ 将口令写在纸条上，并贴在屏幕上

- ✓ 多个账户使用相同口令

- ✓ 多个人员共享同一口令

#### 良好的口令管理习惯

- ✓ 不使用弱口令使用强口令(强口令：长度大于等于8个，英文大小写、数字与特殊符号组合)

- ✓ 定期(每隔90天)更改一次口令

- ✓ 妥善保管口令，严防泄漏口令

- ✓ 不同个账户使用不同口令；若干套口令，相互隔离：银行卡、QQ、电子邮件、论坛等

- [x] 什么口令属于强壮口令？
  > - 包含大、小写字符，数字，特殊符号，长度符合一定要求

- [x] 复杂口令容易忘记，怎么办？
  > - 古诗词法，例如：白日依山尽，取bairiyishanjin的BrYsj@01

- [x] 定期更换太麻烦
  > - 第一季度取BrYsj@01，第二季度取黄河入海流，HhRhl@02

- [x] 另外，替换法
  > - 123456 → i23456，!23456；infosec → 1nf0sec

#### 口令管理

- [x] 口令存放到正确的位置

- [x] 一次性登录口令，供他人临时使用

- [x] 最常用的口令，切记不要告诉他人

- [x] **若干套口令，相互隔离**
  > - 银行卡、电子邮件、论坛等

- [x] 遗忘口令时的口令恢复
  > - 防患于未然

#### 防卫口令猜测的措施

- [x] 设置口令
  > - guest账户
  > - 系统初始安装时administrator口令为空

- [x] 更改默认口令
  > - 默认帐户口令有助于安装系统；但如果不改变口令，则为攻击者留下了后门，且攻击者在进入该系统后，使用该系统来攻击其它系统
  > - SQL Server的sa管理员密码为空
  > - Movable Type blog系统的默认用户名/密码为Melody/Nelson

- [x] 口令长度
  > - 为了挫败穷尽搜索，规定一个最小口令长度。 `口令长度和每个口令字符的取值范围决定了系统的口令空间`
  > - 原来科大bbs的最大口令长度只支持8位，口令截断
  > - 6位数密码输4位就能取钱

- [x] 口令格式
  > - 在口令中混合使用大、小写字母，并且包含数字和其他非字母符号－特殊符号等
  > - sina邮箱密码不能使用特殊符号

- [x] 避免显著口令
  > - 目前字典攻击已经大大扩展了“易于猜测”的范围
  > - 123456 → i23456，!23456；infosec → 1nf0sec

#### 系统进一步提高口令的安全性

- [x] `口令检查器` ： `检查弱口令` ，以阻止针对系统的字典攻击

- [x] `口令生成` ：使用口令发生器，生成随机的和可推断的口令。用户不允许选择自己的口令，而必须采用系统建议的口令。如附加码

- [x] `口令老化` ：设置口令到期的日期，迫使用户定期改变口令

- [x] `限制登录尝试` ：系统可以监视不成功的登录企图并作出反应，完全锁住用户帐户，或至少锁住一段时间，以防止或阻止进一步的尝试。如ATM、windows登录

- [x] `通知用户` ：在成功登录之后，系统可以显示上一次登录的时间以及从那以后失败的登录企图次数，从而提醒用户有关最近的攻击企图。如科大BBS登录

- [x] `密码输入器、软键盘、随机键盘` ：防止键盘记录、密码窃取

#### 口令管理
- [x] 不能孤立地看待安全机制
  > - 口令保管得当
  > - 口令的复杂性 VS. 人的记忆能力
  > - 更改口令时，重复输入多次
  > - 有效的口令恢复机制

### 欺骗攻击

#### 欺骗攻击

- [x] 通过用户名和口令的身份识别和认证提供了 `单向认证` （unilateral authentication），即 `计算机认证用户`
- [x] 单向认证导致了第二类口令威胁 `欺骗攻击` 
  > - 攻击者在某些终端或工作站上给出一个 `假的登录屏幕`
  > - 受害者通过标准登录菜单的引导被要求输入用户名和口令，这些信息被攻击者保存下来。
  > - 然后执行可能被移交给用户，或者用一个（假的）出错消息中止登录，欺骗程序终止运行。控制被返回到操作系统，运行操作系统的登录程序，进行第二次登录
  > - 例如： `钓鱼网站，网吧盗取QQ号码，银行ATM区门禁`
- [x] 防范这样的欺骗攻击的对策
  > - `显示失败的注册次数` 可以暗示用户已经发生过这样的攻击
  > - `可信通路` ***保证用户是与操作系统（可信计算基TCB）通信而不是与一个欺骗程序在通信***
  > - `相互认证` ***在用户和可信计算基之间进行相互认证***

#### 口令的“查找”和“截获”问题
- [x] 除了欺骗攻击，入侵者还可以有其他“查找”口令的方法
  > - `口令缓存` ，特别是在分布式系统中的 `对象重用`
  > - 口令会被 `临时存放在中间存储位置` ，如缓冲器、高速缓存，或者甚至是一个网页。这些存储位置的管理通常超出用户的可控范围，而口令在这些位置的存放时间可能会比用户预料的要长

- [x] `认证基于秘密信息` ；如果在网络环境下使用用户名和口令来认证用户身份， `明文口令会在网上传输` ， `则导致口令泄漏` 。即使在网上传输密文口令，密文口令也容易遭到 `重放攻击`
  > - telnet vs. ssh

#### 口令攻击：窃听

<p align="center">
  <img src="./img/窃听.png" alt="口令攻击：窃听">
  <p align="center">
   <span>口令攻击：窃听</span>
  </p>
</p>

#### 口令攻击：截取/重放

<p align="center">
  <img src="./img/截取.png" alt="口令攻击：截取/重放">
  <p align="center">
   <span>口令攻击：截取/重放</span>
  </p>
</p>

#### 口令的重用问题

- [x] 口令有一个基本问题： `口令可以重用`
  > - 如果攻击者获取了口令，他可以重放口令。系统不可能区分知道口令的攻击者和合法用户。 `在网络环境下，必须进行双向认证`
  > - 可选择的解决方法：每次传送的口令改变（一次性口令），挑战机制，短信认证码

- [x] `一次一密` 最安全，加解密算法超简单
  > - 密钥随机产生，不重复使用
  > - 密钥与明文的长度一致，异或产生密文
  > - 量子密钥
  > - 保密性 VS. 完整性/可用性

### 保护口令文件

#### 保护口令文件

- [x] `未加密的口令文件内容泄漏或者是文件内容的修改，构成了第三类口令威胁`

- [x] `加密` 口令文件泄露会导致 `离线处理的字典攻击`

- [x] 为保护口令文件，可采取如下措施：
  > - `加密保护` (例如Hash加密)，存储口令加密后的密文
  > - 由操作系统执行 `访问控制` ，限制对口令文件的访问
  > > - 操作系统中的访问控制机制只允许拥有适当权限的用户访问文件和其它资源。只有特权用户才能访问口令文件
  >
  > - `组合加密保护和访问控制` ，为了减慢字典攻击的速度，甚至可以使用更多的增强措施，如Unix在加密口令时增加了12位的盐值（salt），称为 `口令盐化`
  > > - 即使是相同的算法，相同的原始口令，使用不同的salt，也会得到不同的加密口令

#### 单向函数

- [x] 单向函数就是易于计算但很难逆推的函数。即给定x很容易计算f(x)，但给定f(x)很难计算x
  > 单向函数用来保护存储的口令

- [x] Unix系统选择使用单向函数crypt(3)，该函数使用略加修改的DES（Data Encryption Standard，数据加密标准）算法，用全零的数据块和12位（bits）的盐值作为初始值（52位的0＋12位的salt），用口令作为密钥（56位），重复运行算法25次

#### Unix的口令文件

- [x] Unix将加密的口令保存在一个不可公开访问的文件，称为 `影子口令文件` (例如Unix中的/etc/shadow)

- [x] `专用存储格式` 提供了一种较弱的读保护形式，比如Windows以专门二进制格式保存加密口令

- [x] 三个安全设计的问题：
  > - `几种机制的组合可以增强保护` 。加密和访问控制用来保护口令文件
  > - `通过隐匿而获得的安全性只能防御不经心的入侵者` 。不要对这种策略抱太多的信任。Windows文件隐藏功能
  > - 如果可能的话， `将安全相关的数据和那些要被公开访问的数据隔离开来`
  > > 在Unix中，/etc/passwd包含有以上两种数据。影子口令文件（ /etc/shadow)能够获得所希望的隔离性

### 一次签到

#### 一次签到

- [x] 在IT环境中，用户名和口令用来控制对计算机、网络、程序和文件等的访问。但如果为获取一点信息而在信息空间漫游时必须一遍又一遍地输入口令，这会令人不快

- [x] `一次签到服务` （single sign-on service）解决了这个问题。 `用户只要输入一次口令，系统保存这个口令，并在需要重新认证时使用保存的口令进行认证`
  > - 网站上的记住用户名、密码选项
  > - Cookie

- [x] 一次签到服务的安全问题
  > - 系统现在需要以明文的形式存储口令？
  > - 如何保护存储的口令？
  > - 如何传输明文形式的口令？

- [x] 注：系统设计者必须均衡考虑 `方便性` 和 `安全性` 。易于使用是使得IT系统真正有用的一个重要因素，不幸的是，许多方便的举措也引入了新的脆弱性

#### 门户的“一次签到”

- [x] 门户通行证和注册入口：首先用户通过在平台上注册信息，成为平台用户

- [x] 通过门户通行证登录门户系统，经平台认证的用户可以根据自己权限访问各个具体的业务系统，而且用户在通过平台认证后，只要IE浏览没有关闭，用户可在各业务系统间随意切换，不需要再次的输入用户登录信息，给网站用户带来了极大的方便

```mermaid
graph LR
A[门户通行证Passport]-->|身份认证|B[平台统一认证门户]
B-->C[业务系统1用户ID]
B-->D[业务系统2用户ID]
B-->E[业务系统3用户ID]
B-->F[业务系统4用户ID]
E-->F
```

#### 门户网站的统一身份认证
- [x] 门户网站是一个集新闻、电子邮件、短信以及各种网络增值业务和无线资讯为一体的综合平台

- [x] 解决方案：集身份认证、单点登录、集中管理和安全通道为一体

- [x] 统一身份认证平台由管理系统、认证服务器、认证数据库以及 `业务系统的认证前置程序组成`

- [x] 门户系统增加 `用户` 与 `业务系统帐户` 的Mapping页面：用户在使用门户通行证登录门户后，第一次访问业务系统时，需要完成与业务系统帐户的映射（mapping），该页面根据认证平台中业务系统的配置自动生成

- [x] 门户首页中 `各业务系统的链接地址更改为虚拟地址` ：实施统一认证后，门户首页中的各业务系统链接地址均改为虚拟地址，用户点击该地址时，平台首先检查用户是否已登录门户通行证，如果没有则跳转到门户通行证的登录页面，登录后在再通过认证服务器和业务系统认证前置程序之间的SSL加密通道自动认证，直接进入要访问的业务系统

- [x] 资源整合：认证平台以资源整合为中心，通过平台的管理系统和数据库，统一用户资源和各增值业务系统，实现用户的统一管理和访问控制，实现各系统资源的统筹管理

- [x] 身份认证和单点登录：认证平台通过统一的用户帐户对用户身份进行认证，在通过平台认证后，用户可直接访问各个业务系统，实现用户身份认证信息的共享，从而达到 `多业务系统的单点登录`

- [x] 安全通道：认证平台提供两种安全通道：一种是单向SSL加密，一种是双向SSL加密安全通道，充分保证登录认证过程和业务系统访问过程的安全性

### 口令的缺点

- [x] 口令在网络中传输时是很容易被窃取或攻击的，这是口令认证的明显缺点。比较常见的攻击和窃取方式主要有以下几种：

- [x] `网络数据流窃听` ：由于认证信息要通过网络传递，并且很多认证系统的口令是未经加密的 `明文` ，攻击者很容易的通过窃听网络数据，分辨出某种特定系统的认证数据，并提取出用户名和口令

- [x] `认证信息截取/重放` ：有些系统会将认证信息进行简单加密后进行传输，如果攻击者无法用网络数据流窃听方式推算出密码，将使用 `截取/重放` 方式，再进行分辨和提取

- [ ] 字典攻击：大多数用户习惯使用有意义的单词字符或数字作为密码，如名字、生日；某些攻击者会使用字典中的单词来尝试用户的密码。所以大多数系统都建议用户在口令中加入特殊字符，以增加口令的安全性

- [ ] 穷举尝试：这是一种属于字典攻击的特殊攻击方式，它使用字符串的全集作为字典，然后穷举尝试进行猜测。如果用户的密码较短，则很容易被穷举出来，因而很多系统都建议用户使用较长的口令，最好采用数字、字符混合的方式并加入特殊字符

- [ ] 窥探口令：攻击者利用与被攻击系统接近的机会，安装监视器或亲自窥探合法用户输入口令的过程，以得到口令。所以用户在输入口令时，应该注意旁边的人是否可疑

- [ ] 骗取口令：攻击者冒充合法用户发送邮件或打电话给管理人员，以骗取用户口令

- [ ] 垃圾搜索：攻击者通过搜索被攻击者的废弃物，得到与被攻击系统有关的信息

## 基于USB Key的身份认证

### “你拥有的东西”进行身份认证

- [x] 利用“你拥有的东西”进行身份认证

- [x] 磁卡
  >  - 磁卡仅有 `数据存储` 能力，而 `无数据处理` 能力
  >  - 可单独使用，也可跟pin码联合使用
  >  - 需要特殊的读卡设备，不适合在计算机上使用

- [x] 智能卡（Smart Card）
  > - 集成了CPU、EPROM、RAM、ROM和COS(Chip Operating System)，不仅具有读写和存储数据的功能，而且能对数据进行处理

### 基于USB Key的身份认证

- [x] 基于USB Key的身份认证方式是近几年发展起来的一种方便、安全、可靠的身份认证技术

- [x] USB Key是一种USB接口的小巧的硬件设备，形状与我们常见的U盘没有什么两样。但它的内部结构不简单，它内置了CPU、存储器、芯片操作系统（COS），可以存储用户的密钥或数字证书，利用USB Key内置的密码算法实现对用户身份的认证

#### USB Key历史

- [x] USB Key产品最早是由加密锁厂商提出来。原先的 `USB加密锁` 主要用于防止软件破解和复制，保护软件不被盗版，又叫“ `加密狗` ”

- [x] USB Key的目的不同，USB Key主要用于 `网络认证` ， ***锁内主要保存数字证书和用户私钥***

#### USB Key特点

- [x] USB Key结合了现代密码学技术、智能卡技术和USB技术，是新一代身份认证产品，具有以下特点：

- [x] `双因子认证`
  > - 每一个USB Key都具有硬件PIN码保护， `PIN码` 和 `硬件` 构成了用户使用USB Key的两个必要因素，即所谓“双因子认证”
  > - 用户只有同时取得了USB Key和用户PIN码，才可以登录系统
  > > - 即使用户的PIN码被泄漏，只要用户持有的USB Key不被盗取，合法用户的身份就不会被仿冒
  > > - 如果用户的USB Key遗失，拾到者由于不知道用户PIN码，也无法仿冒合法用户的身份

- [x] `带有安全存储空间`
  > - USB Key具有8K-128K的安全数据存储空间，可以存储数字证书、用户密钥等秘密数据

- [x] `硬件实现加解密算法`
  > - USB Key 内置CPU或智能卡芯片，可以实现PKI体系中使用的数据摘要、数据加解密和签名的各种算法， `加解密运算在USB Key内进行` ，保证了用户密钥不会出现在计算机内存中，从而杜绝了用户密钥被黑客截取的可能性

- [x] `便于携带，安全可靠`
  > -如拇指般大的USB Key非常方便随身携带，并且密钥和证书不可导出，Key的硬件不可复制，更显安全可靠

#### USB Key应用模式

##### 1）基于冲击-响应(/挑战-应答)认证模式

- [ ] USB Key内置单向散列算法（MD5），预先在USB Key和服务器中存储一个证明用户身份的密钥

- [ ] 当需要在网络上验证用户身份时，先由客户端向服务器发出一个验证请求

- [ ] 服务器接到此请求后生成一个随机数回传给客户端PC上插着的USB Key，此为“ `冲击` ”

- [ ] USB Key使用该随机数与存储在USBKey中的密钥进行MD5运算得到一个运算结果作为认证证据传送给服务器，此为“ `响应` ”

- [ ] 与此同时，服务器使用该随机数与存储在服务器数据库中的该客户密钥进行MD5运算，如果服务器的运算结果与客户端传回的响应结果相同，则认为客户端是一个合法用户

##### 2）基于数字证书的认证方式

- [x] `PKI`（Public Key Infrastructure）即公共密钥体系，即利用一对互相匹配的密钥进行加密、解密

- [x] 一个公共密钥（公钥，public key）和一个私有密钥（私钥，private key）

- [x] 其基本原理是：由一个密钥进行加密的信息内容，只能由与之配对的另一个密钥才能进行解密

- [x] 公钥可以广泛地发给与自己有关的通信者，私钥则需要十分安全地存放起来

#### USB Key应用

- [x] 网银。目前工行的USB Key产品为“ `U盾` ”，招行的USB Key产品为“ `友Key` ”，两者的主要供应商都是USB Key的专业厂商捷德公司

- [x] 现行网银客户端的保障方面，主流是使用USB Key，还有使用 `动态口令牌` 、 `短信密码` 等

#### USB Key安全问题

- [x] `客户端的交互操作存在漏洞` 。由于PIN码是在用户电脑上输入的，因此黑客依然可以通过程序 `截获用户PIN码` ，如果 `用户不及时取走USB Key` ，那么黑客可以通过截获的PIN码来取得虚假认证。黑客可以远程控制，冒用客户的USB Key进行身份认证，而客户无法知晓
  > - 这种漏洞的解决方式是在USB Key上增加一个确认键，用户按USB Key上的确认键后才能进行一次认证

- [x] `无法防止数据被篡改` 。客户的一笔交易在送入USB Key加密前，可能会被黑客拦截屏篡改为另外一笔交易，这样可以在用户不知情的情况下篡改交易而认证通过
  > - 这种漏洞的解决也需要变更USB Key的硬件，在USB Key上增加一个显示屏，能够显示交易信息和数字

### 动态口令牌

- [x] 动态口令牌，又叫动态密码锁
  > - 动态密码锁是透过1组数学加密算法，使用者手中会持有1组显示器(token)，该 `显示器会与后端服务器同步计算` ，并出现1组密码数字，使用者必须在一定的时间内(如30秒钟)完成密码输入，才能完成帐号登入，若是超过时限则会出现新的密码数字，必须重新执行帐号登入
  > - 采用动态口令的认证方式就是在每次用户登录时除了输入常规的 `静态口令` 外，还要再输入一个每次都会变化的 `动态口令`

#### 动态口令认证系统

- [x] 动态口令认证系统利用用户密钥和时间双因素，产生随时间变化的有效用户口令，对用户身份进行认证

<p align="center">
  <img src="./img/动态口令认证系统.png" alt="动态口令认证系统">
  <p align="center">
   <span>动态口令认证系统</span>
  </p>
</p>

##### 动态口令身份认证原理

<p align="center">
  <img src="./img/动态口令身份认证原理.png" alt="动态口令身份认证原理">
  <p align="center">
   <span>动态口令身份认证原理</span>
  </p>
</p>

#### 动态口令牌优点

- [x] `无须安装` 软件，操作简单。 `与客户电脑无关` ，不需要安装其他任何程序即可直接使用网上银行服务

- [x] `一次一密` ，解决了客户密码被盗的问题。这应该是动态口令牌在安全性方面带来的最大好处

- [x] 很大程度上解决了传统的用户名/静态口令认证方式存在的口令易泄露，用户身份容易被冒充的安全隐患，增强了用户名/口令份认证机制的安全性

#### 智能令牌

- 多种多样

- USB接口

- 无接口

- 带输入

### 短信密码（短信验证码）

- [x] 短信密码以手机短信形式请求包含6位随机数的 `动态密码` ，身份认证系统以短信形式发送随机的6位密码到客户的手机上

- [x] 客户在登录或者交易认证时候输入此动态密码，从而确保系统身份认证的安全性。它利用what you have方法

- [x] 手机支付：比较方便

#### 短信密码优点

- [x] 安全性：由于手机与客户绑定比较紧密， `短信密码生成与使用场景是物理隔绝的` ，因此密码在通路上被截取几率降至最低

- [x] 普及性：只要会接收短信即可使用，大大降低短信密码技术的使用门槛， `学习成本几乎为0` ，所以在市场接受度上面不会存在阻力

- [x] 易收费：由于移动互联网用户天然养成了付费的习惯，这和PC时代互联网截然不同的理念，而且收费通道非常的发达，如果是网银、第三方支付、电子商务可将短信密码作为一项增值业务，每月通过SP收费不会有阻力，因此也可增加收益

- [x] 易维护：由于短信网关技术非常成熟，大大降低短信密码系统上马的复杂度和风险，短信密码业务后期客服成本低，稳定的系统在提升安全同时也营造良好的口碑效应，这也是目前银行也大量采纳这项技术很重要的原因

## 基于生物特征的身份认证

- [x] 目前用于身份验证的特征主要有两类：
  > - `非生物特征` 是指用户所知道的东西（如口令、个人密码等）及所拥有的东西（如智能卡、身份证、护照、密钥盘等）
  > - `生物特征` 是指人体本身所固有的物理特征（如指纹、掌纹、虹膜、视网膜等）及行为特征（如语音、签名等）

- [x] 与传统的身份认证方法相比有如下优点：
  > - `更具安全性` (生物特征基本不存在丢失、遗忘或被盗的问题)
  > - `更具保密性` (用于身份认证的生物特征技术较难被伪造)
  > - `更具方便性` (生物特征具有随身“携带”的特点以及随时随地可用的特点)

- [x] 理想上，一种好的生物认证特征应具有下列条件：
  > - `普遍性` ，即每个人皆具有的特征
  > - `唯一性` ，即没有任何二人具有完全相同的特征
  > - `恒久性` ，即此特征必须持久且不能改变
  > - `可测量性` ，即这种特征必须能被测量成可定量描述的数据指标

- [x] 在设计实用的生物认证系统时，还有许多方面需要纳入考量，如
  > - `效能` ，即认证的速度以及结果的可靠度
  > - `接受度` ，即民众是否愿意接受并使用此系统
  > - `闪避容易度` ，即是否容易用其他手段来愚弄或欺骗这套系统

## 网络实名制

### 网络实名制的基础

- [x] `VIEID` 即俗称的 `网络身份证` ，VIEID的普及是互联网实名制的根本前提

- [x] VIEID是互联网络信息世界中标识用户身份的工具，用于在网络通讯中识别通讯各方的身份及表明我们的身份或某种资格
